!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return r}),t.d(n,"c",function(){return a});const o=!0;function i(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&null!=e[t].episode&&n.push({name:t,episode:e[t].episode,url:e[t].url});return n}function r(e){o&&console.log(e)}function a(e){console.error(`Error: ${e}`)}},function(e,n,t){"use strict";t.r(n);var o=t(0);const{h:i,app:r}=t(2),a=window.location.hostname,s="[0-9]+[.]{0,1}[0-9]*",l={dragging:!1,x:0,y:0,offsetX:0,offsetY:0,inputAnime:document.title,inputEpisode:document.title,animeName:"",animeEpisode:"",savedAnimeEpisode:"",addAnime:"none",updateAnime:"none",notConfigured:"none",configure:"none",configured:"none",divDisplay:"none"},u={drop:e=>n=>{n.dragging&&"BUTTON"!=e.target.tagName&&"INPUT"!=e.target.tagName&&browser.storage.local.get(a).then(function(e){null==e[a]&&(e[a]={}),e[a].x=n.x,e[a].y=n.y,e[a].offsetX=n.offsetX,e[a].offsetY=n.offsetY,browser.storage.local.set(e)});return{dragging:!1}},grab:e=>{if("BUTTON"!=e.target.tagName&&"INPUT"!=e.target.tagName)return e.preventDefault(),{x:e.pageX,y:e.pageY,offsetX:e.offsetX,offsetY:e.offsetY,dragging:!0}},move:({x:e,y:n})=>t=>t.dragging&&{x:e,y:n},saveConfig:()=>e=>{for(var n=document.title.replace(e.inputAnime,"%s");n.indexOf(e.inputAnime)>=0;)n=n.replace(e.inputAnime,".+");for(;n.indexOf(e.inputEpisode)>=0;)n=n.replace(e.inputEpisode,"%d");for(;n.indexOf("%d")>=0;)n=n.replace("%d",s);var t={};t[a]={formattedTitle:n,isConfigured:!0,x:e.x,y:e.y,offsetX:e.offsetX,offsetY:e.offsetY},browser.storage.local.set(t);var o=f(t[a].formattedTitle);return{configured:"block",configure:"none",animeName:o.name,animeEpisode:o.episode,addAnime:"block"}},addOrUpdateAnime:()=>e=>{var n={},t=e.animeEpisode;return n[e.animeName]={episode:t,url:window.location.href},browser.storage.local.set(n),"block"==e.addAnime?{addAnime:"none",updateAnime:"block",savedAnimeEpisode:t}:{savedAnimeEpisode:t}},deleteAnime:()=>e=>(browser.storage.local.remove(e.animeName),{addAnime:"block",updateAnime:"none",savedAnimeEpisode:""}),stateAssign:e=>Object.assign({},e)},d=(e,n)=>i("div",{id:"anime-logger-div",style:{height:"100px",backgroundColor:"white",color:"black","font-size":"13px","font-family":"Arial,Helvetica Neue,Helvetica,sans-serif",border:"1px solid black",padding:"3px",zIndex:"100",position:"absolute",left:e.x-e.offsetX+"px",top:e.y-e.offsetY+"px",display:e.divDisplay},onmousedown:e=>n.grab(e)},i("div",{style:{display:e.notConfigured}},["Go to a page that contains an anime ep then press done?",i("br"),i("button",{onclick:()=>n.stateAssign({configure:"block",notConfigured:"none"})},"done")]),i("div",{style:{display:e.configure}},["Only keep the anime name in the first textbox, and type the episode in the 2nd one (if site starts episode with 00 include them, for example 001):",i("input",{type:"text",value:e.inputAnime,oninput:e=>n.stateAssign({inputAnime:e.target.value}),style:{width:"90%"}}),i("br"),i("input",{type:"text",value:e.inputEpisode,oninput:e=>n.stateAssign({inputEpisode:e.target.value}),style:{width:"90%"}}),i("br"),i("button",{onclick:()=>n.saveConfig()},"done")]),i("div",{style:{display:e.configured}},["name:"+e.animeName,i("br"),i("div",{style:{display:e.updateAnime}},["saved episode:"+e.savedAnimeEpisode,i("br")]),"episode:",i("button",{onclick:()=>n.stateAssign({animeEpisode:parseInt(e.animeEpisode)-1})},"-"),e.animeEpisode,i("button",{onclick:()=>n.stateAssign({animeEpisode:parseInt(e.animeEpisode)+1})},"+"),i("br"),i("div",{style:{display:e.addAnime}},[i("button",{onclick:()=>n.addOrUpdateAnime()},"add")]),i("div",{style:{display:e.updateAnime}},[i("button",{onclick:()=>n.addOrUpdateAnime()},"update"),i("button",{onclick:()=>n.deleteAnime()},"delete")])]));function f(e){Object(o.b)("load anime info");var n=e.split("%s"),t=document.title,i=0,r=0,a=RegExp(n[0],"g").exec(t);if(!a)return Object(o.b)("no match"),null;Object(o.b)("beginning match "+a.index),i=a.index;var l=RegExp(n[1],"g").exec(t);if(!l)return Object(o.b)("no match"),null;Object(o.b)("ending match "+l.index),r=l.index;var u=t.substring(i,r),d=(e=(e=e.replace("%s",u)).replace(".+",u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))).split(s),f=t.replace(d[0],"");d[0]="";var c=d.join(s);return c=c.substring(s.length,c.length),{name:u,episode:f=f.replace(RegExp(c,"g"),"")}}if(!window.loaded){Object(o.b)("loaded"),window.loaded=!0;var c=document.createElement("div");document.body.appendChild(c);const e=r(l,u,d,c);addEventListener("mouseup",n=>e.drop(n)),addEventListener("mousemove",n=>e.move({x:n.pageX,y:n.pageY})),function(e){browser.storage.local.get(a).then(function(n){if(Object(o.b)("got site information"),null!=n[a]&&n[a].isConfigured){Object(o.b)("site configured");var t=f(n[a].formattedTitle);if(null==t)return;browser.storage.local.get(t.name).then(function(i){Object(o.b)("got anime info");var r=-1;null!=i[t.name]&&(r=i[t.name].episode);var s="none",l="none";r>-1?l="block":s="block",e.stateAssign({divDisplay:"block",animeName:t.name,animeEpisode:t.episode,configured:"block",savedAnimeEpisode:r,addAnime:s,updateAnime:l,x:n[a].x,y:n[a].y,offsetX:n[a].offsetX,offsetY:n[a].offsetY})},function(e){Object(o.b)("could not get anime information,"+e)})}else{Object(o.b)("site not configured");var i={divDisplay:"block",notConfigured:"block"};null!=n[a]&&(i.x=n[a].x,i.y=n[a].y,i.offsetX=n[a].offsetX,i.offsetY=n[a].offsetY),e.stateAssign(i)}},function(e){Object(o.b)("could not get host information,"+e)})}(e)}},function(e,n,t){"use strict";function o(e,n){for(var t=[],o=[],i=arguments.length;i-- >2;)t.push(arguments[i]);for(;t.length;){var r=t.pop();if(r&&r.pop)for(i=r.length;i--;)t.push(r[i]);else null!=r&&!0!==r&&!1!==r&&o.push(r)}return"function"==typeof e?e(n||{},o):{nodeName:e,attributes:n||{},children:o,key:n&&n.key}}function i(e,n,t,o){var i,r=[].map,a=o&&o.children[0]||null,s=a&&function e(n){return{nodeName:n.nodeName.toLowerCase(),attributes:{},children:r.call(n.childNodes,function(n){return 3===n.nodeType?n.nodeValue:e(n)})}}(a),l=[],u=!0,d=g(e),f=function e(n,t,o){for(var i in o)"function"==typeof o[i]?function(e,i){o[e]=function(e){var r=i(e);return"function"==typeof r&&(r=r(b(n,d),o)),r&&r!==(t=b(n,d))&&!r.then&&m(d=v(n,g(t,r),d)),r}}(i,o[i]):e(n.concat(i),t[i]=g(t[i]),o[i]=g(o[i]));return o}([],d,g(n));return m(),f;function c(e){return"function"==typeof e?c(e(d,f)):null!=e?e:""}function p(){i=!i;var e=c(t);for(o&&!i&&(a=function e(n,t,o,i,r){if(i===o);else if(null==o||o.nodeName!==i.nodeName){var a=function e(n,t){var o="string"==typeof n||"number"==typeof n?document.createTextNode(n):(t=t||"svg"===n.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",n.nodeName):document.createElement(n.nodeName);var i=n.attributes;if(i){i.oncreate&&l.push(function(){i.oncreate(o)});for(var r=0;r<n.children.length;r++)o.appendChild(e(n.children[r]=c(n.children[r]),t));for(var a in i)x(o,a,i[a],null,t)}return o}(i,r);n.insertBefore(a,t),null!=o&&A(n,t,o),t=a}else if(null==o.nodeName)t.nodeValue=i;else{!function(e,n,t,o){for(var i in g(n,t))t[i]!==("value"===i||"checked"===i?e[i]:n[i])&&x(e,i,t[i],n[i],o);var r=u?t.oncreate:t.onupdate;r&&l.push(function(){r(e,n)})}(t,o.attributes,i.attributes,r=r||"svg"===i.nodeName);for(var s={},d={},f=[],p=o.children,m=i.children,v=0;v<p.length;v++){f[v]=t.childNodes[v];var b=y(p[v]);null!=b&&(s[b]=[f[v],p[v]])}for(var v=0,h=0;h<m.length;){var b=y(p[v]),E=y(m[h]=c(m[h]));if(d[b])v++;else if(null==E||u)null==b&&(e(t,f[v],p[v],m[h],r),h++),v++;else{var N=s[E]||[];b===E?(e(t,N[0],N[1],m[h],r),v++):N[0]?e(t,t.insertBefore(N[0],f[v]),N[1],m[h],r):e(t,f[v],null,m[h],r),d[E]=m[h],h++}}for(;v<p.length;)null==y(p[v])&&A(t,f[v],p[v]),v++;for(var v in s)d[v]||A(t,s[v][0],s[v][1])}return t}(o,a,s,s=e)),u=!1;l.length;)l.pop()()}function m(){i||(i=!0,setTimeout(p))}function g(e,n){var t={};for(var o in e)t[o]=e[o];for(var o in n)t[o]=n[o];return t}function v(e,n,t){var o={};return e.length?(o[e[0]]=e.length>1?v(e.slice(1),n,t[e[0]]):n,g(t,o)):n}function b(e,n){for(var t=0;t<e.length;)n=n[e[t++]];return n}function y(e){return e?e.key:null}function h(e){return e.currentTarget.events[e.type](e)}function x(e,n,t,o,i){if("key"===n);else if("style"===n)for(var r in g(o,t)){var a=null==t||null==t[r]?"":t[r];"-"===r[0]?e[n].setProperty(r,a):e[n][r]=a}else"o"===n[0]&&"n"===n[1]?(n=n.slice(2),e.events?o||(o=e.events[n]):e.events={},e.events[n]=t,t?o||e.addEventListener(n,h):e.removeEventListener(n,h)):n in e&&"list"!==n&&!i?e[n]=null==t?"":t:null!=t&&!1!==t&&e.setAttribute(n,t),null!=t&&!1!==t||e.removeAttribute(n)}function A(e,n,t){function o(){e.removeChild(function e(n,t){var o=t.attributes;if(o){for(var i=0;i<t.children.length;i++)e(n.childNodes[i],t.children[i]);o.ondestroy&&o.ondestroy(n)}return n}(n,t))}var i=t.attributes&&t.attributes.onremove;i?i(n,o):o()}}t.r(n),t.d(n,"h",function(){return o}),t.d(n,"app",function(){return i})}]);